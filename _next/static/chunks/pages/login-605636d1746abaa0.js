(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459,69],{6429:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return o(1632)}])},1632:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return m}});var r=o(5893),n=o(645),i=o.n(n),s=o(9008),a=o.n(s),c=o(1664),d=o.n(c),l=o(7294),f=o(1163),b=o(6989),u=o(9069);function m(){let[e,t]=(0,l.useState)(""),[o,n]=(0,l.useState)(!1),s=(0,f.useRouter)(),c=async e=>{e.preventDefault(),n(!0),t("");let o=new FormData(e.target),r=o.get("email"),i=o.get("password");try{let e=await b.k.login(r,i);e.access_token?((0,u.o4)(e.access_token),s.push("/dashboard")):t("Login failed: No token received")}catch(e){t(e.message||"An error occurred during login")}finally{n(!1)}};return(0,r.jsxs)("div",{className:"jsx-e2ce8fd4f6b16fb8 container",children:[(0,r.jsxs)(a(),{children:[(0,r.jsx)("title",{className:"jsx-e2ce8fd4f6b16fb8",children:"Login - Todo App"}),(0,r.jsx)("meta",{name:"description",content:"Log in to your Todo App account",className:"jsx-e2ce8fd4f6b16fb8"})]}),(0,r.jsxs)("main",{className:"jsx-e2ce8fd4f6b16fb8",children:[(0,r.jsx)("h1",{className:"jsx-e2ce8fd4f6b16fb8 title",children:"Login"}),e&&(0,r.jsx)("div",{className:"jsx-e2ce8fd4f6b16fb8 error",children:e}),(0,r.jsxs)("form",{onSubmit:c,className:"jsx-e2ce8fd4f6b16fb8 login-form",children:[(0,r.jsxs)("div",{className:"jsx-e2ce8fd4f6b16fb8 input-group",children:[(0,r.jsx)("label",{htmlFor:"email",className:"jsx-e2ce8fd4f6b16fb8",children:"Email:"}),(0,r.jsx)("input",{type:"email",id:"email",name:"email",required:!0,className:"jsx-e2ce8fd4f6b16fb8"})]}),(0,r.jsxs)("div",{className:"jsx-e2ce8fd4f6b16fb8 input-group",children:[(0,r.jsx)("label",{htmlFor:"password",className:"jsx-e2ce8fd4f6b16fb8",children:"Password:"}),(0,r.jsx)("input",{type:"password",id:"password",name:"password",required:!0,className:"jsx-e2ce8fd4f6b16fb8"})]}),(0,r.jsx)("button",{type:"submit",disabled:o,className:"jsx-e2ce8fd4f6b16fb8",children:o?"Logging In...":"Log In"})]}),(0,r.jsxs)("p",{className:"jsx-e2ce8fd4f6b16fb8 signup-link",children:["Don't have an account?"," ",(0,r.jsx)(d(),{href:"/signup",children:"Sign up"})]})]}),(0,r.jsx)(i(),{id:"e2ce8fd4f6b16fb8",children:".container.jsx-e2ce8fd4f6b16fb8{min-height:100vh;padding:0 .5rem;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.title.jsx-e2ce8fd4f6b16fb8{margin:0;line-height:1.15;font-size:2.5rem}.login-form.jsx-e2ce8fd4f6b16fb8{width:100%;max-width:400px;padding:2rem;border:1px solid#ddd;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;margin-top:2rem}.input-group.jsx-e2ce8fd4f6b16fb8{margin-bottom:1rem}.input-group.jsx-e2ce8fd4f6b16fb8 label.jsx-e2ce8fd4f6b16fb8{display:block;margin-bottom:.5rem;font-weight:bold}.input-group.jsx-e2ce8fd4f6b16fb8 input.jsx-e2ce8fd4f6b16fb8{width:100%;padding:.5rem;border:1px solid#ccc;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}button.jsx-e2ce8fd4f6b16fb8{width:100%;padding:.75rem;background-color:#0070f3;color:white;border:none;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;cursor:pointer;font-size:1rem}button.jsx-e2ce8fd4f6b16fb8:hover{background-color:#0060e0}button.jsx-e2ce8fd4f6b16fb8:disabled{background-color:#ccc;cursor:not-allowed}.error.jsx-e2ce8fd4f6b16fb8{color:#e74c3c;padding:.5rem;margin-bottom:1rem;border:1px solid#e74c3c;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;background-color:#fdeded;width:100%;max-width:400px;text-align:center}.signup-link.jsx-e2ce8fd4f6b16fb8{margin-top:1rem;text-align:center}"})]})}},6989:function(e,t,o){"use strict";o.d(t,{P:function(){return s},k:function(){return i}});let r="https://evolution-of-todo-app--backend-production.up.railway.app",n=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!r)throw Error("NEXT_PUBLIC_API_URL environment variable must be set");let n="".concat(r).concat(e),{getToken:i}=await o.e(69).then(o.bind(o,9069)),s=i(),a={"Content-Type":"application/json",...t.headers};s&&(a.Authorization="Bearer ".concat(s));let c={headers:a,...t},d=await fetch(n,c);if(!d.ok)throw Error((await d.json().catch(()=>({}))).detail||"HTTP error! Status: ".concat(d.status));return d.json()},i={signup:async(e,t)=>n("/auth/signup",{method:"POST",body:JSON.stringify({email:e,password:t})}),login:async(e,t)=>{let o=await fetch("".concat(r,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(!o.ok)throw Error((await o.json().catch(()=>({}))).detail||"HTTP error! Status: ".concat(o.status));return o.json()}},s={getTodos:async()=>n("/todos"),createTodo:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return n("/todos",{method:"POST",body:JSON.stringify({title:e,description:t,completed:!1})})},updateTodo:async(e,t)=>n("/todos/".concat(e),{method:"PUT",body:JSON.stringify(t)}),deleteTodo:async e=>n("/todos/".concat(e),{method:"DELETE"}),toggleTodo:async e=>n("/todos/".concat(e,"/toggle"),{method:"PATCH"})}},9069:function(e,t,o){"use strict";o.d(t,{getToken:function(){return n},kS:function(){return c},o4:function(){return r},t0:function(){return a}});let r=e=>{localStorage.setItem("token",e)},n=()=>localStorage.getItem("token"),i=()=>{localStorage.removeItem("token")},s=()=>{let e=n();if(!e)return null;try{let t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),o=atob(t);return JSON.parse(o)}catch(e){return console.error("Error decoding token:",e),null}},a=async()=>{if(!n())return null;try{let e=s();if(!e)return i(),null;let t=Math.floor(Date.now()/1e3);if(e.exp&&e.exp<t)return i(),null;return{email:e.sub||e.email}}catch(e){return console.error("Error checking auth status:",e),i(),null}},c=async()=>{i()}},1163:function(e,t,o){e.exports=o(3079)}},function(e){e.O(0,[678,888,774,179],function(){return e(e.s=6429)}),_N_E=e.O()}]);