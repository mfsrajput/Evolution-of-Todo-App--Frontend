(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26,69],{1075:function(t,e,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return o(1643)}])},1643:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return f}});var n=o(5893),s=o(7294),a=o(1163),i=o(9008),r=o.n(i),l=o(9069),d=o(6989),c=o(1894),u=o.n(c),_=t=>{let{onEditTodo:e,onTodoUpdated:o}=t,[a,i]=(0,s.useState)([]),[r,l]=(0,s.useState)(!0),[c,_]=(0,s.useState)("");(0,s.useEffect)(()=>{m()},[]);let m=async()=>{try{l(!0);let t=await d.P.getTodos();i(t)}catch(t){_(t.message||"Failed to fetch todos")}finally{l(!1)}},h=async t=>{try{let e=await d.P.toggleTodo(t);i(a.map(o=>o.id===t?e:o)),o&&o(e)}catch(t){_(t.message||"Failed to toggle todo")}},p=async t=>{try{await d.P.deleteTodo(t),i(a.filter(e=>e.id!==t))}catch(t){_(t.message||"Failed to delete todo")}},T=t=>{e&&e(t)};return r?(0,n.jsx)("div",{children:"Loading todos..."}):c?(0,n.jsxs)("div",{className:u().error,children:["Error: ",c]}):(0,n.jsxs)("div",{className:u().container,children:[(0,n.jsx)("h2",{className:u().title,children:"Your Todos"}),0===a.length?(0,n.jsx)("p",{className:u().emptyMessage,children:"No todos yet. Add your first todo!"}):(0,n.jsx)("ul",{className:u().todoList,children:a.map(t=>(0,n.jsxs)("li",{className:u().todoItem,children:[(0,n.jsxs)("div",{className:u().todoInfo,children:[(0,n.jsx)("h3",{className:u().todoTitle,children:t.title}),t.description&&(0,n.jsx)("p",{className:u().todoDescription,children:t.description}),(0,n.jsx)("span",{className:"".concat(u().status," ").concat(t.completed?u().completed:u().pending),children:t.completed?"Completed":"Pending"})]}),(0,n.jsxs)("div",{className:u().actions,children:[(0,n.jsx)("button",{className:u().toggleButton,onClick:()=>h(t.id),children:t.completed?"Mark Incomplete":"Mark Complete"}),(0,n.jsx)("button",{className:u().deleteButton,onClick:()=>p(t.id),children:"Delete"}),(0,n.jsx)("button",{className:u().editButton,onClick:()=>T(t),children:"Edit"})]})]},t.id))})]})},m=o(842),h=o.n(m),p=t=>{let{onAddTodo:e,onUpdateTodo:o,initialData:a=null}=t,[i,r]=(0,s.useState)((null==a?void 0:a.title)||""),[l,c]=(0,s.useState)((null==a?void 0:a.description)||""),[u,_]=(0,s.useState)(!1),[m,p]=(0,s.useState)("");(0,s.useEffect)(()=>{r((null==a?void 0:a.title)||""),c((null==a?void 0:a.description)||"")},[a]);let T=async t=>{t.preventDefault(),_(!0),p("");try{if(a){let t=await d.P.updateTodo(a.id,{title:i,description:l});o&&o(t)}else{let t=await d.P.createTodo(i,l);e&&e(t),r(""),c("")}}catch(t){p(t.message||"Failed to save todo")}finally{_(!1)}};return(0,n.jsxs)("div",{className:h().container,children:[(0,n.jsx)("h3",{className:h().title,children:a?"Edit Todo":"Add New Todo"}),m&&(0,n.jsx)("div",{className:h().error,children:m}),(0,n.jsxs)("form",{onSubmit:T,className:h().form,children:[(0,n.jsxs)("div",{className:h().inputGroup,children:[(0,n.jsx)("label",{htmlFor:"title",className:h().label,children:"Title *"}),(0,n.jsx)("input",{type:"text",id:"title",name:"title",value:i,onChange:t=>r(t.target.value),required:!0,className:h().input,placeholder:"Enter todo title"})]}),(0,n.jsxs)("div",{className:h().inputGroup,children:[(0,n.jsx)("label",{htmlFor:"description",className:h().label,children:"Description"}),(0,n.jsx)("textarea",{id:"description",name:"description",value:l,onChange:t=>c(t.target.value),className:h().textarea,rows:"3",placeholder:"Enter todo description (optional)"})]}),(0,n.jsx)("button",{type:"submit",className:h().submitButton,disabled:u,children:u?a?"Updating...":"Adding...":a?"Update Todo":"Add Todo"})]})]})},T=o(569),g=o.n(T),f=()=>{let t=(0,a.useRouter)(),[e,o]=(0,s.useState)(null),[i,d]=(0,s.useState)(""),[c,u]=(0,s.useState)(null),[m,h]=(0,s.useState)(0);(0,s.useEffect)(()=>{(async()=>{let e=await (0,l.t0)();e?o(e):t.push("/login")})()},[t]);let T=async()=>{await (0,l.kS)(),t.push("/login")},f=t=>{h(t=>t+1),u(null)};return e?(0,n.jsxs)("div",{className:g().container,children:[(0,n.jsxs)(r(),{children:[(0,n.jsx)("title",{children:"Dashboard - Todo App"}),(0,n.jsx)("meta",{name:"description",content:"Your Todo Dashboard"})]}),(0,n.jsxs)("header",{className:g().header,children:[(0,n.jsx)("h1",{className:g().title,children:"Todo Dashboard"}),(0,n.jsxs)("div",{className:g().userSection,children:[(0,n.jsxs)("span",{className:g().userEmail,children:["Welcome, ",e.email]}),(0,n.jsx)("button",{onClick:T,className:g().logoutButton,children:"Logout"})]})]}),i&&(0,n.jsx)("div",{className:g().error,children:i}),(0,n.jsxs)("main",{className:g().main,children:[(0,n.jsx)("section",{className:g().formSection,children:(0,n.jsx)(p,{onAddTodo:t=>{h(t=>t+1),u(null)},onUpdateTodo:f,initialData:c})}),(0,n.jsx)("section",{className:g().listSection,children:(0,n.jsx)(_,{onEditTodo:t=>{u(t)},onTodoUpdated:f},m)})]})]}):(0,n.jsx)("div",{className:g().container,children:(0,n.jsx)("div",{className:g().loading,children:"Loading..."})})}},6989:function(t,e,o){"use strict";o.d(e,{P:function(){return i},k:function(){return a}});let n="https://evolution-of-todo-app-backend.onrender.com",s=async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!n)throw Error("NEXT_PUBLIC_API_URL environment variable must be set");let s="".concat(n).concat(t),{getToken:a}=await o.e(69).then(o.bind(o,9069)),i=a(),r={"Content-Type":"application/json",...e.headers};i&&(r.Authorization="Bearer ".concat(i));let l={headers:r,...e},d=await fetch(s,l);if(!d.ok)throw Error((await d.json().catch(()=>({}))).detail||"HTTP error! Status: ".concat(d.status));return d.json()},a={signup:async(t,e)=>s("/auth/signup",{method:"POST",body:JSON.stringify({email:t,password:e})}),login:async(t,e)=>{let o=await fetch("".concat(n,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:e})});if(!o.ok)throw Error((await o.json().catch(()=>({}))).detail||"HTTP error! Status: ".concat(o.status));return o.json()}},i={getTodos:async()=>s("/todos"),createTodo:async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return s("/todos",{method:"POST",body:JSON.stringify({title:t,description:e,completed:!1})})},updateTodo:async(t,e)=>s("/todos/".concat(t),{method:"PUT",body:JSON.stringify(e)}),deleteTodo:async t=>s("/todos/".concat(t),{method:"DELETE"}),toggleTodo:async t=>s("/todos/".concat(t,"/toggle"),{method:"PATCH"})}},9069:function(t,e,o){"use strict";o.d(e,{getToken:function(){return s},kS:function(){return l},o4:function(){return n},t0:function(){return r}});let n=t=>{localStorage.setItem("token",t)},s=()=>localStorage.getItem("token"),a=()=>{localStorage.removeItem("token")},i=()=>{let t=s();if(!t)return null;try{let e=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),o=atob(e);return JSON.parse(o)}catch(t){return console.error("Error decoding token:",t),null}},r=async()=>{if(!s())return null;try{let t=i();if(!t)return a(),null;let e=Math.floor(Date.now()/1e3);if(t.exp&&t.exp<e)return a(),null;return{email:t.sub||t.email}}catch(t){return console.error("Error checking auth status:",t),a(),null}},l=async()=>{a()}},842:function(t){t.exports={container:"TodoForm_container__0nVTc",title:"TodoForm_title__V5nJk",form:"TodoForm_form__Mt4O_",inputGroup:"TodoForm_inputGroup__dPdwP",label:"TodoForm_label__s0O9y",input:"TodoForm_input__PVw3b",textarea:"TodoForm_textarea__ce5X_",submitButton:"TodoForm_submitButton__WwisU",error:"TodoForm_error___9BSF"}},1894:function(t){t.exports={container:"TodoList_container__dlaYf",title:"TodoList_title__8SJBE",emptyMessage:"TodoList_emptyMessage__Ya4_J",todoList:"TodoList_todoList__C1kH4",todoItem:"TodoList_todoItem__E8bXT",todoInfo:"TodoList_todoInfo__EFLhG",todoTitle:"TodoList_todoTitle__AlRun",todoDescription:"TodoList_todoDescription__Tt_jX",status:"TodoList_status__He1jY",pending:"TodoList_pending__Qg494",completed:"TodoList_completed__daUGq",actions:"TodoList_actions__wRiIK",toggleButton:"TodoList_toggleButton__pjADE",deleteButton:"TodoList_deleteButton__Ay5Di",editButton:"TodoList_editButton__EQhA0",error:"TodoList_error__0yQPJ"}},569:function(t){t.exports={container:"Dashboard_container__NIhIv",header:"Dashboard_header__Zvu6_",title:"Dashboard_title__cl9_F",userSection:"Dashboard_userSection__iYWKC",userEmail:"Dashboard_userEmail__0T_PF",logoutButton:"Dashboard_logoutButton__FPO3B",main:"Dashboard_main__aJkg_",formSection:"Dashboard_formSection__0vM66",listSection:"Dashboard_listSection__RwFyl",error:"Dashboard_error__8LlNJ"}},9008:function(t,e,o){t.exports=o(3867)},1163:function(t,e,o){t.exports=o(3079)}},function(t){t.O(0,[888,774,179],function(){return t(t.s=1075)}),_N_E=t.O()}]);